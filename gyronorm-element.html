<!-- Add gyronorm.js including all dependencies -->
<script type="text/javascript" src="/bower_components/gyronorm/dist/gyronorm.complete.min.js"></script>

<dom-module id="gyronorm-element">

  <script>

    Polymer({
      is: "gyronorm-element",
      properties:{
        // Values for the deviceorientation and devicemotion as return from the Gyronorm.js
        alpha:{type: Number , notify: true , value: 0},
        beta:{type: Number , notify: true , value: 0},
        gamma:{type: Number , notify: true , value: 0},
        accelerationX:{type: Number , notify: true , value: 0},
        accelerationY:{type: Number , notify: true , value: 0},
        accelerationZ:{type: Number , notify: true , value: 0},
        gravityX:{type: Number , notify: true , value: 0},
        gravityY:{type: Number , notify: true , value: 0},
        gravityZ:{type: Number , notify: true , value: 0},
        rotationRateAlpha:{type: Number , notify: true , value: 0},
        rotationRateBeta:{type: Number , notify: true , value: 0},
        rotationRateGamma:{type: Number , notify: true , value: 0},
        // Log message attribute to pass the logs to the host
        logMessage:{type: String , notify: true , value: ''}
      },
      ready: function(){

        var gn = new GyroNorm();

        // Initialize gn object.
        gn.init().then(function(){

          gn.start(function(data){

            this.alpha = data.do.alpha;
            this.beta = data.do.beta;
            this.gamma = data.do.gamma;

            this.accelerationX = data.dm.x;
            this.accelerationY = data.dm.y;
            this.accelerationZ = data.dm.z;

            this.gravityX = data.dm.gx;
            this.gravityY = data.dm.gy;
            this.gravityZ = data.dm.gz;

            this.rotationRateAlpha = data.dm.alpha;
            this.rotationRateBeta = data.dm.beta;
            this.rotationRateGamma = data.dm.gamma;

          }.bind(this));

        }.bind(this)).catch(function(e){

          this.logMessage = e;

        }.bind(this));

      }

    });
  </script>

</dom-module>
